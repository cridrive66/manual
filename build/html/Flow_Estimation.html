

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flow Estimation &mdash; APRIORA plugin manual  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Emission" href="API_emission.html" />
    <link rel="prev" title="Installation for Windows" href="Installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            APRIORA plugin manual
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Content</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation for Windows</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Flow Estimation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#fix-river-network">Fix River Network</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#importance-of-net-id-and-net-to">Importance of NET_ID and NET_TO</a></li>
<li class="toctree-l3"><a class="reference internal" href="#non-aligned-river-sections">Non-aligned river sections</a></li>
<li class="toctree-l3"><a class="reference internal" href="#workflow">Workflow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#contributing-area">Contributing Area</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-to-do-it">How to do it?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#calculate-geofactors">Calculate Geofactors</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">Flow Estimation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#random-forest-regressor">Random Forest Regressor</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="API_emission.html">API Emission</a></li>
<li class="toctree-l1"><a class="reference internal" href="Troubleshooting.html">Troubleshooting</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">APRIORA plugin manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Flow Estimation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/Flow_Estimation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="flow-estimation">
<span id="id1"></span><h1>Flow Estimation<a class="headerlink" href="#flow-estimation" title="Link to this heading"></a></h1>
<p>The <em>Flow Estimation</em> provides an estimation of yearly mean flow and yearly mean low fow for each subcatchment or
river section within a specified catchment area. This estimation is made by <strong>Random Forest</strong> (insert link), which
uses the catchment’s geographical characteristics as predictors and water flow data collected from gauging stations
to calibrate and validate the approach.</p>
<p>This group of tools is divided 4 different processes:</p>
<ul class="simple">
<li><p>Fix River Network</p></li>
<li><p>Contributing Area</p></li>
<li><p>Calculate Geofactors</p></li>
<li><p>Flow Estimation</p></li>
</ul>
<p><strong>insert plugin scheme</strong></p>
<section id="fix-river-network">
<h2>Fix River Network<a class="headerlink" href="#fix-river-network" title="Link to this heading"></a></h2>
<p>Understanding the flow direction (where the water is going and which other river section it contributes to) is a critical aspect of the river network.
This information is very important for calculating the flow of each river section and determining accumulated values.
Also, in many cases the intersection between the river network and the subcatchments is not perfectly aligned. This misalignment can cause issue in later
steps of the plugin, so better fix the input beforehand!</p>
<p>This algorithm was developed from the plugin <em>WaterNetAnalyzer</em> by Jannik Schilling (insert link).</p>
<section id="importance-of-net-id-and-net-to">
<h3>Importance of NET_ID and NET_TO<a class="headerlink" href="#importance-of-net-id-and-net-to" title="Link to this heading"></a></h3>
<p>NET_ID and NET_TO are very important because they explain the relationship of the river network.</p>
</section>
<section id="non-aligned-river-sections">
<h3>Non-aligned river sections<a class="headerlink" href="#non-aligned-river-sections" title="Link to this heading"></a></h3>
<p>It can happen that there is a misalignment between the river sections and the subcatchments. Here we fix it.
We fix it because otherwise the model struggle to understand where the water is flowing and it can cause errors or over/under estimation during the flow model.
.. note:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>If the misalignment is greater than 10 cm, the plugin will not fix it and it is necessary to manually adjust the input file. Check the :ref:`Troubleshooting` section
for more information about it.
</pre></div>
</div>
</section>
<section id="workflow">
<h3>Workflow<a class="headerlink" href="#workflow" title="Link to this heading"></a></h3>
<p>Input data:</p>
<ul class="simple">
<li><p><strong>subcatchments.shp</strong></p></li>
<li><p><strong>river_network.shp</strong></p></li>
</ul>
<ol class="arabic simple">
<li><p>Add all the input data to the project by clicking on “Layer –&gt; Add Layer –&gt; Add Vector Layer”</p></li>
<li><p>Go in the Processing Toolbox and look for the <em>APRIORA</em> plugin. Click on <em>Flow estimation</em> and open <em>1 - Fix River Network</em></p></li>
<li><p>Choose <strong>subcatchments.shp</strong> as input for <em>Catchment areas</em></p></li>
<li><p>Choose <strong>river_network.shp</strong> as input for <em>River network</em></p></li>
<li><p>Click on the three dots and click on the outlet point of the river network. The point selected does not have to be exactly on the outlet, just approximately there.</p></li>
<li><p>Click on <em>Run</em></p></li>
</ol>
<img alt="_images/Fix_river_network_1.png" src="_images/Fix_river_network_1.png" />
<p>Output data:</p>
<ul class="simple">
<li><p><strong>fixed_river_network.shp</strong></p></li>
</ul>
<p>Two new columns have been added to the attribute table: NET_ID and NET_TO. These columns represent the river network ID of each specific section and the river network ID of
where the water is going. Before continue, it is important to check if the new colums are populated correctly for all river sections. If any value under NET_TO is unconnected,
it might be due to the fact that the river sections are not connected with each others. Check the geometry of the unconnected river sections, manually adjust them and re-run the
tool until there are no unconnected values in the NET_TO column. Important: apply the changes to <strong>river_network.shp</strong> and not to <strong>fixed_river_network.shp</strong>.</p>
</section>
</section>
<section id="contributing-area">
<h2>Contributing Area<a class="headerlink" href="#contributing-area" title="Link to this heading"></a></h2>
<p>We have gauging stations and we want to calculate their contributing area.</p>
<section id="how-to-do-it">
<h3>How to do it?<a class="headerlink" href="#how-to-do-it" title="Link to this heading"></a></h3>
<p>We do it using it a nice algorithm.</p>
</section>
</section>
<section id="calculate-geofactors">
<h2>Calculate Geofactors<a class="headerlink" href="#calculate-geofactors" title="Link to this heading"></a></h2>
<p>The geofactors are very important for the model. They are the predictors of the model and they are describing certain characteristics of the subcatchments.</p>
</section>
<section id="id2">
<h2>Flow Estimation<a class="headerlink" href="#id2" title="Link to this heading"></a></h2>
<p>This is the last part of the model where we estimate the flow.</p>
<section id="random-forest-regressor">
<h3>Random Forest Regressor<a class="headerlink" href="#random-forest-regressor" title="Link to this heading"></a></h3>
<p>This is the model used for estimating the flow.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Installation.html" class="btn btn-neutral float-left" title="Installation for Windows" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="API_emission.html" class="btn btn-neutral float-right" title="API Emission" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Cristiano Guidi.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>